<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="com.metaaps.eoclipse.reader" name="reader" schema="schema/com.metaaps.eoclipse.datasets.exsd"/>
   <extension-point id="com.metaaps.eoclipse.import" name="Import" schema="schema/com.metaaps.eoclipse.import.exsd"/>
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewerContentBinding
            viewerId="com.metaaps.eoclipse.navigatorcontent">
         <includes>
            <contentExtension
                  pattern="com.metaaps.eoclipse.datasets.NCE">
            </contentExtension>
         </includes>
      </viewerContentBinding>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <navigatorContent
            contentProvider="com.metaaps.eoclipse.datasets.internal.NCE.ContentProvider"
            id="com.metaaps.eoclipse.datasets.NCE"
            labelProvider="com.metaaps.eoclipse.datasets.internal.NCE.LabelProvider"
            name="Data Sets"
            priority="highest">
         <enablement>
            <instanceof
                  value="com.metaaps.eoclipse.common.IWorkFlow">
            </instanceof>
         </enablement>
      </navigatorContent>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="popup:navigatorcontent.popupmenu">
         <command
               commandId="org.eclipse.ui.edit.delete"
               id="cnf.popupmenu.delete"
               label="Delete"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <command
               commandId="datasets.new"
               label="New"
               style="push">
            <visibleWhen
                  checkEnabled="true">
            </visibleWhen>
         </command>
         <menu
               id="navigatorcontent.popupmenu.import"
               label="Import">
         </menu>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="datasets.new"
            name="New DataSets">
      </command>
      <command
            id="com.metaaps.eoclipse.datasets.refresh"
            name="Refresh Processing">
      </command>
      <command
            id="com.metaaps.eoclipse.datasets.change"
            name="Change Data Source">
      </command>
      <command
            id="com.metaaps.eoclipse.datasets.newimport"
            name="Import">
         <commandParameter
               id="com.metaaps.eoclipse.datasets.importmethod"
               name="importmethod"
               optional="true">
         </commandParameter>
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.metaaps.eoclipse.datasets.internal.NCE.DeleteHandler"
            commandId="org.eclipse.ui.edit.delete">
         <activeWhen>
            <reference
                  definitionId="com.metaaps.eoclipse.datasets.isdata">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="com.metaaps.eoclipse.datasets.isdata">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="com.metaaps.eoclipse.datasets.internal.NCE.NewHandler"
            commandId="datasets.new">
         <activeWhen>
            <reference
                  definitionId="com.metaaps.eoclipse.datasets.isimport">
            </reference>
         </activeWhen>
         <enabledWhen>
            <reference
                  definitionId="com.metaaps.eoclipse.datasets.isimport">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="com.metaaps.eoclipse.datasets.internal.NCE.ImportHandler"
            commandId="com.metaaps.eoclipse.datasets.newimport">
      </handler>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="com.metaaps.eoclipse.datasets.isdata">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false"
                  operator="or">
               <instanceof
                     value="com.metaaps.eoclipse.common.datasets.IDataContent">
               </instanceof>
            </iterate>
         </with>
      </definition>
      <definition
            id="com.metaaps.eoclipse.datasets.isimport">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false"
                  operator="or">
               <instanceof
                     value="com.metaaps.eoclipse.common.datasets.IImportMethod">
               </instanceof>
            </iterate>
         </with>
      </definition>
      <definition
            id="com.metaaps.eoclipse.datasets.isdatasets">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false"
                  operator="or">
               <instanceof
                     value="com.metaaps.eoclipse.common.datasets.IDataSets">
               </instanceof>
            </iterate>
         </with>
      </definition>
   </extension>
   <extension
         point="com.metaaps.eoclipse.layer2extensions">
      <Imports
            Class="com.metaaps.eoclipse.datasets.importmethods.AllImports">
      </Imports>
      <Readers
            Class="com.metaaps.eoclipse.datasets.readers.AllReaders">
      </Readers>
   </extension>

</plugin>
